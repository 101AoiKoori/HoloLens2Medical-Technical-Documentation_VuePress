# 配置缓存大小与内存上限 

根据设备内存和使用场景，开发者可以调整每个平面的缓存容量和内存限制。更大的容量意味着更少的缓存命中失效，但也会占用更多内存。

## 设置方法

使用 `SetCacheSize(axialSize, sagittalSize, coronalSize)` 设置三个平面的最大纹理数目。该方法会自动根据纹理数目推算每个平面的内存上限，并触发一次缓存修剪。

```csharp
// 假设你希望轴向最多缓存 256 张纹理，矢状和冠状各 64 张
DicomTextureCache cache = ...;
cache.SetCacheSize(256, 64, 64);
```

如果需要更细粒度控制（如不同平面使用不同的内存倍数），可直接修改 `_axialMemoryLimit` 等字段并重新编译源码。

## 调优建议

* **HoloLens 2 / 移动设备**：内存较小，建议将轴向缓存数设置在 128 ~ 256，矢状/冠状为 32 ~ 64。
* **桌面平台**：可根据显卡内存适当提高缓存上限，但要注意避免长时间占用过大显存。
* 调整完毕后，使用调试工具观察内存占用曲线，以找到适合的平衡点。